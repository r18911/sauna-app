<div class="rooms-container">
  <h1>ÈÉ®Â±ã‰∏ÄË¶ß</h1>

  <% if user_signed_in? %>
    <p class="welcome-message"><%= current_user.nickname.presence || "„Ç≤„Çπ„Éà" %> „Åï„Çì</p>
  <% end %>

  <% if user_signed_in? && current_user.admin? %>
    <div class="room-actions">
      <%= link_to "ÈÉ®Â±ã„ÇíËøΩÂä†„Åô„Çã", new_room_path, class: "btn-admin btn-add-room" %>
    </div>
  <% end %>

 <div class="auth-buttons">
    <% if user_signed_in? %>
      <%= link_to "„É≠„Ç∞„Ç¢„Ç¶„Éà", destroy_user_session_path, method: :delete, data: { turbo_method: :delete }, class: "btn-auth btn-logout" %>
      <%= link_to "‰∫àÁ¥ÑÁ¢∫Ë™ç", reservations_path, class: "btn-auth btn-reservations" %>
    <% else %>
      <%= link_to "„É≠„Ç∞„Ç§„É≥", new_user_session_path, class: "btn-auth btn-login" %>
      <%= link_to "Êñ∞Ë¶èÁôªÈå≤", new_user_registration_path, class: "btn-auth btn-signup" %>
    <% end %>
  </div>

  <% @rooms.each do |room| %>
    <div class="room-card">
      <!-- üîπ ÁÆ°ÁêÜËÄÖÁî®„ÅÆÁ∑®ÈõÜ„ÉªÂâäÈô§„Éú„Çø„É≥ -->
        <% if user_signed_in? && current_user.admin? %>
          <div class="admin-buttons">
            <%= link_to "Á∑®ÈõÜ", edit_room_path(room), class: "btn-admin btn-edit" %>
            <%= link_to "ÂâäÈô§", room_path(room), method: :delete, data: { confirm: "Êú¨ÂΩì„Å´ÂâäÈô§„Åó„Åæ„Åô„ÅãÔºü", turbo_method: :delete }, class: "btn-admin btn-delete" %>
          </div>
        <% end %>

      <!-- ÈÉ®Â±ã„ÅÆÁîªÂÉè -->
      <div class="room-images">
        <%= image_tag url_for(room.images.first), alt: room.name, class: "room-img" %>
      </div>

      <!-- ÈÉ®Â±ãÊÉÖÂ†± -->
      <div class="room-info">
        <h2><%= room.name %></h2>
        <p>Â∫É„Åï: <%= room.size %>„é°</p>
        <p>„Éô„ÉÉ„Éâ: <%= room.bed_type %></p>
        <p>Ë®≠ÂÇô: <%= room.facilities %></p>
        <p>ÂÆöÂì°: <%= room.capacity %>Âêç</p>

        <!-- ÊñôÈáë -->
        <div class="room-price">
          <p>ÊñôÈáë: <span>¬•<%= room.price %> / Ê≥ä</span></p>
        </div>

        <!-- üîπ ËøΩÂä†: Ë©≥Á¥∞„Éú„Çø„É≥ -->
        <div class="room-actions">
          <%= link_to "Ë©≥Á¥∞„ÇíË¶ã„Çã", room_path(room), class: "btn-detail" %>

          <!-- ‰∫àÁ¥Ñ„Éú„Çø„É≥ÔºàÊù°‰ª∂ÂàÜÂ≤êÔºâ -->
          <% if user_signed_in? %>
            <%= link_to "„Åì„ÅÆÈÉ®Â±ã„Çí‰∫àÁ¥Ñ", new_reservation_path(room_id: room.id), class: "btn-reserve" %>
          <% else %>
            <%= link_to "„Åì„ÅÆÈÉ®Â±ã„Çí‰∫àÁ¥Ñ", new_user_session_path, class: "btn-reserve" %>
          <% end %>
        </div>
      </div>
    </div>
  <% end %>
  <div class="top-navigation">
    <%= link_to "„Éà„ÉÉ„Éó„Éö„Éº„Ç∏„Å´Êàª„Çã", root_path, class: "btn-home" %>
  </div>
</div>